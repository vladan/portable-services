no_tls: False
tls_certificate_path: "/etc/synapse/jenga.local.tls.crt"
tls_private_key_path: "/etc/synapse/jenga.local.tls.key"
tls_dh_params_path: "/etc/synapse/jenga.local.tls.dh"
tls_fingerprints: []
# tls_fingerprints: [{"sha256": "<base64_encoded_sha256_fingerprint>"}]


## Server ##
server_name: "jenga.local"
pid_file: /var/lib/synapse/homeserver.pid


soft_file_limit: 0
use_presence: true


listeners:
  -
    port: 8448
    bind_addresses:
      - '::'
      - '0.0.0.0'
    type: http
    tls: true
    x_forwarded: false
    resources:
      -
        names:
          - client       # The client-server APIs, both v1 and v2
          # - webclient  # A web client. Requires web_client_location to be set.
        compress: true

      - names: [federation]  # Federation APIs
        compress: false


# Database configuration
database:
  name: "sqlite3"
  args:
    database: "/var/lib/synapse/homeserver.db"

event_cache_size: "10K"

log_config: "/etc/synapse/log.config"


## Ratelimiting ##
rc_messages_per_second: 0.2
rc_message_burst_count: 10.0
federation_rc_window_size: 1000
federation_rc_sleep_limit: 10
federation_rc_sleep_delay: 500
federation_rc_reject_limit: 50
federation_rc_concurrent: 3

# Directory where uploaded images and attachments are stored.
media_store_path: "/var/lib/synapse/media_store"
uploads_path: "/var/lib/synapse/uploads"
max_upload_size: "10M"
max_image_pixels: "32M"

dynamic_thumbnails: false
thumbnail_sizes:
- width: 32
  height: 32
  method: crop
- width: 96
  height: 96
  method: crop
- width: 320
  height: 240
  method: scale
- width: 640
  height: 480
  method: scale
- width: 800
  height: 600
  method: scale

url_preview_enabled: False
max_spider_size: "10M"


## Captcha ##
recaptcha_public_key: "YOUR_PUBLIC_KEY"
recaptcha_private_key: "YOUR_PRIVATE_KEY"
enable_registration_captcha: False
recaptcha_siteverify_api: "https://www.google.com/recaptcha/api/siteverify"

turn_user_lifetime: "1h"
turn_allow_guests: True


## Registration ##
enable_registration: False
registration_shared_secret: ",@MxAOPr0kkpC-Gzzk1=Ea-HKH@S-utf:Uf0fiz;xAo~I2Y9Fk"
bcrypt_rounds: 12
allow_guest_access: False
trusted_third_party_id_servers:
    - matrix.org
    - vector.im

autocreate_auto_join_rooms: true


## Metrics ###
enable_metrics: False
report_stats: false


## API Configuration ##
room_invite_state_types:
    - "m.room.join_rules"
    - "m.room.canonical_alias"
    - "m.room.avatar"
    - "m.room.name"
app_service_config_files: []
track_appservice_user_ips: False
macaroon_secret_key: "mL9+dY892cIh&=L6kdZV.SU;i_N=-*DBkA,p^Jp8eQ_v7-DXz4"
expire_access_token: False
form_secret: "&+O&4t2BKp=E++pPrc:Y=Uxi50yM,Z5XxX^VFQ7Fad^0y,#bOc"

## Signing Keys ##

signing_key_path: "/etc/synapse/jenga.local.signing.key"
old_signing_keys: {}
key_refresh_interval: "1d" # 1 Day.


# Enable password for login.
password_config:
   enabled: true
   # Uncomment and change to a secret random string for extra security.
   # DO NOT CHANGE THIS AFTER INITIAL SETUP!
   #pepper: ""

enable_group_creation: false
alias_creation_rules:
    - user_id: "*"
      alias: "*"
      action: allow
